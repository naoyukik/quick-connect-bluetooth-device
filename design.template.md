# 設計書: [アプリケーション名]

<!--
このドキュメントは、`requirements.md` に基づき、アプリケーションの技術的な設計を定義します。
[ ] 内のプレースホルダーを具体的な内容に置き換え、各項目を記述してください。
-->

## 1. システムアーキテクチャ (System Architecture)

### 1.1. 技術スタック (Technology Stack)
<!-- 要件に基づき、各レイヤーで使用する技術とその選定理由を記述します。 -->
*   **バックエンド:** [例: Rust (Actix Web), Go (Echo), Node.js (Express)]
    *   **理由:** [例: パフォーマンス、生産性、開発者の習熟度など]
*   **フロントエンド:** [例: TypeScript, React (Vite), Vue.js]
    *   **理由:** [例: 開発効率、エコシステムの成熟度など]
*   **データベース:** [例: PostgreSQL, MySQL, MongoDB]
    *   **理由:** [例: データの性質、信頼性、スケーラビリティなど]
*   **認証:** [例: JWTトークンベース認証, OAuth 2.0, セッションベース認証]

### 1.2. システム構成
<!-- システム全体の高レベルな構成図やアーキテクチャパターンを記述します。 -->
[例: 3層アーキテクチャ (クライアント - APIサーバー - データベース)]
[例: マイクロサービスアーキテクチャ]

### 1.3. ディレクトリ構造
<!-- プロジェクトの主要なディレクトリ構成案を記述します。 -->
` + \"\n\" + ````
.
├── [例: backend/ or src/]   # バックエンド関連
├── [例: frontend/]          # フロントエンド関連
├── [例: database/ or db/]   # データベースマイグレーション関連
└── [例: docs/]              # ドキュメント関連

 ## 2. データベース設計 (Database Schema)

 <!--
 アプリケーションで必要となるテーブルのスキーマを定義します。
 以下は一般的な `users` テーブルの例です。これを参考に、必要なテーブルを追加・変更してください。
 -->

 ### `users` table (例)
| Column      | Type          | Constraints                | Description      |
|-------------|---------------|----------------------------|------------------|
| `id`        | `SERIAL`      | `PRIMARY KEY`              | ユーザーID (自動採番) |
| `username`  | `VARCHAR(255)`| `UNIQUE, NOT NULL`         | ユーザー名       |
| `email`     | `VARCHAR(255)`| `UNIQUE, NOT NULL`         | メールアドレス   |
| `password`  | `VARCHAR(255)`| `NOT NULL`                 | ハッシュ化済みパスワード |
| `created_at`| `TIMESTAMPTZ` | `NOT NULL, DEFAULT NOW()`  | 作成日時         |

### `[テーブル名]` table
| Column      | Type          | Constraints                | Description      |
|-------------|---------------|----------------------------|------------------|
| `id`        | `SERIAL`      | `PRIMARY KEY`              | ID               |
| `user_id`   | `INTEGER`     | `FK to users.id, NOT NULL` | 外部キー         |
| `...`       | `...`         | `...`                      | ...              |

 ## 3. APIエンドポイント設計 (API Endpoints)

 `Base URL: [例: /api/v1]`

 <!--
 RESTfulな設計を基本とし、リソースごとにエンドポイントをグループ化して記述します。
 -->

*   **認証 (Auth)**
    *   `POST /auth/register` - [例: 新規ユーザー登録]
    *   `POST /auth/login` - [例: ログイン]
*   **[リソース名1]**
    *   `GET /[resource]` - [例: 一覧取得]
    *   `POST /[resource]` - [例: 新規作成]
    *   `GET /[resource]/:id` - [例: 個別取得]
    *   `PUT /[resource]/:id` - [例: 更新]
    *   `DELETE /[resource]/:id` - [例: 削除]

## 4. 主要UIコンポーネント設計 (UI Components)

<!--
画面を構成する主要なコンポーネントを洗い出し、それぞれの責務を簡潔に記述します。
これにより、フロントエンド開発の見通しが良くなります。
-->
*   **`[App.tsx]`**: [例: アプリケーションのルート。ルーティングやグローバルなStateを管理]
*   **`[LoginPage.tsx]`**: [例: ログイン/登録フォームを持つページ]
*   **`[HomePage.tsx]`**: [例: ログイン後のメインページ。各種コンポーネントを配置]
*   **`[Header.tsx]`**: [例: 全ページ共通のヘッダー。ナビゲーションやユーザー情報を表示]
*   **`[ListComponent.tsx]`**: [例: リソースの一覧を表示するコンポーネント]
*   **`[ItemComponent.tsx]`**: [例: 個別のリソースを表示・操作するコンポーネント]

## 5. 認証フロー (Authentication Flow)

<!--
採用する認証方式の具体的なフローを記述します。
以下はJWTトークンベース認証の一般的なフローの例です。
-->
1.  **ログイン:** ユーザーが認証情報 (ID/パスワード等) をサーバーに送信する。
2.  **トークン発行:** サーバーは認証情報を検証し、正しければ署名付きのJWT (アクセストークン) を生成してクライアントに返す。
3.  **トークン保存:** クライアントは受け取ったJWTを安全な場所 (例: `localStorage`, `HttpOnly` Cookie) に保存する。
4.  **認証付きリクエスト:** 保護されたリソースへのAPIリクエスト時、クライアントは `Authorization: Bearer <token>` ヘッダーにJWTを付与して送信する。
5.  **サーバー検証:** サーバーはリクエストの都度JWTの署名を検証し、有効期限などを確認してリクエストの正当性を判断する。
6.  **ログアウト:** クライアント側でJWTを削除する。必要に応じて、サーバー側でトークンを無効化する仕組みを設ける。
